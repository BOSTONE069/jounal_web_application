{% extends "rjikm/layoutcontact.html" %}

{% block body %}
{% load static %}

<!-- Header Section -->
<section class="contactheader text-center" style="background-color: #1a4036; color: white; padding: 60px;">
  <div>
    <h1>Let's Get In Touch!</h1>
    <p>Ready to start your next project with us? Send us a message and we will get back to you as soon as possible!</p>
  </div>
  <!-- A map of the location of the company -->
  <div class="embed-responsive embed-responsive-16by9">
    <iframe class="embed-responsive-item" src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3988.8170146071766!2d36.81640611560605!3d-1.2836703359874655!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x182f11efc0b203dd%3A0x5376f1de78cf155a!2sNairobi%20C%20B%20D!5e0!3m2!1sen!2ske!4v1672056405044!5m2!1sen!2ske" width="100%" height="400" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
  </div>
</section>

<!-- Contact Information and Form Section -->
<section class="contact-section" style="background-color: #1a4036; padding: 20px; color: white;">
  <div class="container">
    <div class="row">
      <!-- Contact Information -->
      <div class="col-lg-6 col-md-12 mb-4">
        <h3>Contact Information</h3>
        <p> <img src="{% static 'rjikm/location.jpg' %}" width="30" height="30"> <strong>Location:</strong> Nairobi CBD</p>
        <p><img src="{% static 'rjikm/postbox.png' %}" width="30" height="30"> <strong>Box:</strong> 24358-00100 Nairobi, Kenya</p>
        <p><img src="{% static 'rjikm/email.png' %}" width="30" height="30"> <strong>Email:</strong> tom.kwanya@gmail.com</p>
      </div>

      <!-- Contact Form -->
      <div class="col-lg-6 col-md-12">
        <h3>Submit Your Information</h3>
        <form method="post" action="{% url 'contact' %}">
          {% csrf_token %}
          {% for field in form %}
            <div class="form-group mb-3">
              {{ field.label_tag }} {{ field }}
            </div>
          {% endfor %}
          <input type="submit" value="Send" class="btn btn-primary w-100" style="border-radius: 100px; margin-top: 10px; padding-right:10px;">
        </form>
      </div>
    </div>
  </div>
</section>

<!-- Modal Window for Success Message -->
<div id="successModal" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
    <p>Message Sent Successfully</p>
  </div>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
  $(document).ready(function() {
    {% if messages %}
      {% for message in messages %}
        if (message.tags == 'success') {
          $('#successModal').fadeIn();

          // Close the modal when the user clicks the close button or anywhere outside the modal
          $('.close').click(function() {
            $('#successModal').fadeOut(function() {
              window.location.href = "{% url 'contact' %}";
            });
          });
          $(window).click(function(event) {
            if ($(event.target).is('#successModal')) {
              $('#successModal').fadeOut(function() {
                window.location.href = "{% url 'contact' %}";
              });
            }
          });

          // Auto close the modal after 2 seconds
          setTimeout(function() {
            $('#successModal').fadeOut(function() {
              window.location.href = "{% url 'contact' %}";
            });
          }, 2000);
        }
      {% endfor %}
    {% endif %}
  });
</script>

<!-- Displaying the message that the user has sent -->
{% if messages %}
  <ul class="messages" style="color: green; list-style-type: none; text-align: center; font-family: 'Times New Roman', Times, serif; font-size: 20px; font-weight: bold;">
    {% for message in messages %}
      <li {% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
    {% endfor %}
  </ul>
{% endif %}
{% endblock %}
